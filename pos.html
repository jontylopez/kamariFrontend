<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>POS | Kamari</title>
  <link rel="stylesheet" href="css/pos.css" />
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>
<body>
  <header>
    <h1>Kamari POS</h1>
    <a href="index.html">Back to Dashboard</a>
  </header>

  <main class="pos-layout">
    <aside class="left-panel">
      <div class="session-status">
        <button id="startDayBtn" class="always-enabled">Start Day</button>

        <button id="closeDayBtn" disabled>Close Day</button>
        <div id="sessionStatus"></div>
      </div>

      <div class="cart-header">
        <h3>Order #<span id="orderNumber">001</span></h3>
        <button id="clearCartBtn">Clear All</button>
      </div>

      <div id="cartList" class="scanned-items"></div>

      <div class="cart-footer">
        <div class="bill-discount-area">
          <label for="billDiscount">Total Discount (%):</label>
          <input type="number" id="billDiscount" min="0" max="100" value="0" onchange="renderCart()" />
        </div>
        
        <div class="cart-total">Total: Rs <span id="totalAmount">0.00</span></div>
        <button id="checkoutBtn">Proceed to Payment</button>
      </div>
    </aside>

    <section class="right-panel">
      <div class="barcode-section">
        <input type="text" id="barcodeInput" placeholder="Scan or type barcode here..." autofocus />
      </div>

      <div class="category-buttons">
        <button class="category active">All</button>
        <button class="category">Upper Body</button>
        <button class="category">Lower Body</button>
        <button class="category">Others</button>
      </div>

      <div id="productGrid" class="product-grid"></div>
    </section>
  </main>

  

<!-- Price Selection Modal -->
<div id="priceSelectModal" class="modal" style="display: none;">
  <div class="modal-content">
    <h3>Select Sell Price</h3>
    <p id="priceModalProductName"></p>
    <div id="priceOptions"></div>
    <button onclick="closeModal('priceSelectModal')">Cancel</button>
  </div>
</div>


  <!-- Customer Prompt Modal -->
<div id="customerModal" class="modal" style="display: none;">
  <div class="modal-content">
    <h2>Customer Info</h2>
    <label for="customerPhone">Mobile Number:</label>
    <input type="text" id="customerPhone" placeholder="07XXXXXXXX">

    <div id="newCustomerFields" style="display: none;">
      <label for="customerName">Name:</label>
      <input type="text" id="customerName" placeholder="Full Name">

      <label for="customerEmail">Email:</label>
      <input type="email" id="customerEmail" placeholder="Email">
      <button id="registerCustomerBtn">Register</button>
    </div>

    <button id="searchCustomerBtn">Search</button>
    <button id="skipCustomerBtn">Skip</button>
  </div>
</div>

  <!-- Payment Method Modal -->
  <div id="paymentModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Select Payment Method</h2>
      <button onclick="handlePaymentMethod('cash')">üíµ Cash</button>
      <button onclick="handlePaymentMethod('card')">üí≥ Card</button>
      <button onclick="handlePaymentMethod('qr')">üì± QR</button>
      <button onclick="handlePaymentMethod('voucher')">üé´ Voucher</button>
      <button onclick="closeModal('paymentModal')">Cancel</button>
    </div>
  </div>

 

<!-- Cash Modal -->
<div id="cashModal" class="modal" style="display: none;">
  <div class="modal-content">
    <h2>Cash Payment</h2>
    <p><strong>Total:</strong> Rs <span id="cashDueTotal">0.00</span></p>

    <label for="cashInAmount">Cash In:</label>
    <input type="number" id="cashInAmount" placeholder="Enter received amount" />

    <p><strong>Balance:</strong> Rs <span id="liveBalance">0.00</span></p>

    <div class="modal-actions">
      <button id="validateCashBtn">‚úÖ Validate</button>
      <button onclick="closeModal('cashModal')">‚¨Ö Back</button>
    </div>
  </div>
</div>



<!-- Card Payment Modal -->
<div id="cardModal" class="modal" style="display: none;">
  <div class="modal-content">
    <h2>Card Payment</h2>
    <p><strong>Total:</strong> Rs <span id="cardDueTotal">0.00</span></p>

    <div class="modal-actions">
      <button id="cardSuccessBtn">‚úÖ Payment Success</button>
      <button onclick="closeModal('cardModal')">‚¨Ö Back</button>
    </div>
  </div>
</div>

<!-- QR Payment Modal -->
<div id="qrModal" class="modal" style="display: none;">
  <div class="modal-content">
    <h2>QR Payment</h2>
    <p>This feature is <strong>not available</strong> yet.</p>

    <div class="modal-actions">
      <button onclick="closeModal('qrModal')">‚¨Ö Back</button>
    </div>
  </div>
</div>

<!-- Voucher Payment Modal -->
<div id="voucherModal" class="modal" style="display: none;">
  <div class="modal-content">
    <h2>Voucher Payment</h2>
    <p>This feature is <strong>not available</strong> yet.</p>

    <div class="modal-actions">
      <button onclick="closeModal('voucherModal')">‚¨Ö Back</button>
    </div>
  </div>
</div>

<!-- Replace your current receipt modal content with this updated structure -->
<div id="receiptModal" class="modal" style="display: none;">
  <div id="receiptCombinedWrapper">
    <!-- Customer Receipt -->
    <div class="receipt-wrapper" id="receiptContent">
      <!-- HEADER -->
      <div class="receipt-header">
        <img src="images/bill-logo.jpg" class="logo" />
        <div class="slogan">A R T &nbsp; O F &nbsp; L U X U R Y</div>
        <p><strong>Order:</strong> #<span id="receiptOrderNumber"></span></p>
        <p><strong>Customer:</strong> <span id="receiptCustomerId"></span></p>
        <p><strong>Date:</strong> <span id="receiptDate"></span> | Time: <span id="receiptTime"></span></p>
      </div>
  
      <!-- BODY -->
      <div class="receipt-body">
        <table class="receipt-table">
          <thead>
            <tr>
              <th>Item</th>
              <th>Qty</th>
              <th>Rate</th>
              <th>Sub</th>
            </tr>
          </thead>
          <tbody id="receiptItemRows">
            <!-- Items injected by JS -->
          </tbody>
        </table>
      </div>
      
      <div class="totals">
        <p><strong>Payment Method:</strong> <span id="receiptPaymentMethod"></span></p>
        <p><strong>Total:</strong> Rs <span id="receiptTotal"></span></p>
      </div>
      
      <!-- FOOTER -->
      <div class="receipt-footer">
        <div class="receipt-address">Kamari Clothing, 123 Luxury Street, Colombo 07</div>
        <div class="receipt-contact">Call: +94 77 123 4567 | Email: info@kamari.lk</div>
        <div class="receipt-social">
          <img src="images/icons/fb.png" alt="Facebook" />
          <img src="images/icons/ig.png" alt="Instagram" />
          <img src="images/icons/x.png" alt="X" />
          <img src="images/icons/tiktok.png" alt="TikTok" />
        </div>
        <div class="qr-area">[QR CODE HERE]</div>
      </div>
    </div>
    
    <!-- Dotted separation line between receipts -->
    <div style="border-top: 2px dashed #000; margin: 10px 0;"></div>
    
    <!-- Shop Copy -->
    <div class="shop-copy-content" id="shopCopyContent">
      <h2>Kamari POS - Shop Copy</h2>
      <div class="copy-details">
        <p><strong>Order #:</strong> <span id="shopCopyOrderId"></span></p>
        <p><strong>Customer:</strong> <span id="shopCopyCustomer"></span></p>
        <p><strong>Payment Method:</strong> <span id="shopCopyMethod"></span></p>
        <p><strong>Total Amount:</strong> Rs <span id="shopCopyTotal"></span></p>
        <p id="shopCopyCashInWrap" style="display:none;"><strong>Cash In:</strong> Rs <span id="shopCopyCashIn"></span></p>
      </div>
    </div>

    <!-- Print and Close buttons -->
    <div style="text-align:center; margin: 15px 0;">
      <button onclick="window.print()" class="print-btn">üñ®Ô∏è Print Receipt</button>
      <button onclick="closeModal('receiptModal')">Close</button>
    </div>
  </div>
</div>

<!-- Shop Copy Modal -->
<!-- <div id="shopCopyModal" class="modal" style="display: none;">
  <div class="shop-copy-content">
    <h2>Kamari POS - Shop Copy</h2>
    <div class="copy-details">
      <p><strong>Order #:</strong> <span id="shopCopyOrderId"></span></p>
      <p><strong>Customer:</strong> <span id="shopCopyCustomer"></span></p>
      <p><strong>Payment Method:</strong> <span id="shopCopyMethod"></span></p>
      <p><strong>Total Amount:</strong> Rs <span id="shopCopyTotal"></span></p>
      <p id="shopCopyCashInWrap" style="display:none;"><strong>Cash In:</strong> Rs <span id="shopCopyCashIn"></span></p>
    </div>
    <div style="text-align:center; margin-top: 15px;">
      <button onclick="closeReceiptAndCopy()">Close</button>

    </div>
  </div>
</div> -->

  <script src="js/pos.js"></script>
</body>
</html>